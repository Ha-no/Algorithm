
***
Notion : [Notion Link](https://west-pineapple-c4d.notion.site/617b00199dda4621990eec68cdd0318c)  
Problem : [Problem Link](https://www.acmicpc.net/problem/11729)
***



<br/>

### 📋 문제

세 개의 장대가 있고 첫 번째 장대에는 반경이 서로 다른 n개의 원판이 쌓여 있다.  
각 원판은 반경이 큰 순서대로 쌓여있다.  
이제 수도승들이 다음 규칙에 따라 첫 번째 장대에서 세 번째 장대로 옮기려 한다.  

한 번에 한 개의 원판만을 다른 탑으로 옮길 수 있다.  
쌓아 놓은 원판은 항상 위의 것이 아래의 것보다 작아야 한다.  
이 작업을 수행하는데 필요한 이동 순서를 출력하는 프로그램을 작성하라.  
단, 이동 횟수는 최소가 되어야 한다.  

위의 그림은 원판이 5개인 경우의 예시이다.  
 
<br/>

### ✒ 입력

첫째 줄에 첫 번째 장대에 쌓인 원판의 개수 N (1 ≤ N ≤ 20)이 주어진다.  

<br/>

### 🖨 출력

첫째 줄에 옮긴 횟수 K를 출력한다.  

두 번째 줄부터 수행 과정을 출력한다.  
두 번째 줄부터 K개의 줄에 걸쳐 두 정수 A B를 빈칸을 사이에 두고 출력하는데, 이는 A번째 탑의 가장 위에 있는 원판을 B번째 탑의 가장 위로 옮긴다는 뜻이다.   

<br/>

### 🖥 입력 / 출력 예제

#### Input 1
<pre>
3
</pre>

#### Output 1
<pre>
7
1 3
1 2
3 2
1 3
2 1
2 3
1 3
</pre>

<br/>

## 🌈풀이

하노이 공식은 위치가 바뀌는 함수를 Hanoi()라고 가정한다.  

먼저 n개의 원판이 있는 경우 가장큰 원판을 A에서 C로 옮기기 위해서는 n-1개의 원판이 A에서 B로 가야하므로 이동횟수는 Hanoi(n-1)이 된다.  

그리고 A에 남아있는 가장큰 원판 n을 C로 옮기는 횟수는 1이 된다.  

마지막으로 B에 있는 n-1개의 원판을 C로 옮기는 횟수는 처음과 같으므로 Hanoi(n-1)이 된다.  

즉, n개의 원판을 이동하기 위한 횟수는  
Hanoi(n) = 2 * Hanoi(n-1) + 1 이 된다.  
  
  
위의 식을 귀납적으로 정리해본다.  
Hanoi(n) = $a_n$ 이라고 한다면  
$a_n = 2 * a_{n-1} + 1, a_1 = 1$  
$a_{n+1} = 2*a_n+1,\ a_1=1$ 이 된다.  

위 점화식의 양변에 1을 더해 다음과 같이 묶어 준다.  
1. $a_{n+1}+1=2(a_n+1)$  

그리고 임의의 $b_n$을 정의한다.  
$b_n=a_n+1$  

그럼 1번식은 다음과 같이 치환할 수 있다.  
$b_{n+1}=2b_n,\ b1=a_1+1=2$  

즉, 첫째항이 2, 공비가 2인 등비수열이 된다.  

이를 풀어내면  
$b_n=a_n+1=2^n$  
$∴ a_n = 2^n-1$ 의 일반항이 나오게 된다.  
  
  
재귀 알고리즘은 위의 공식을 코드로 따라가면 된다.  

A→B( A→B ( A→B( A→B ) ) ) 으로 진행하다 이동해야할 원판이 1개가 되면 그때 이동했다는 것을 출력한 뒤 리턴해준다.  

그렇게 함수가 닫혀 그 전 재귀로 돌아오게 되면 원판이 2개일 경우가 된다. 이때는 위에서 설명했던대로 1개의 원판이 A→C로 이동하면 되므로 바로 출력한다.  

출력이 끝나면 B→C로 이동하도록 재귀를 호출한다.  
